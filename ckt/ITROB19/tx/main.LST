C51 COMPILER V8.06   MAIN                                                                  02/21/2011 20:22:01 PAGE 1   


C51 COMPILER V8.06, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <REGX51.H>
   2          #include "lcd.c"
   3          #include "serial.c"
   4          sbit buz = P0^2; 
   5          unsigned int tf=0,gf=0;
   6          
   7          
   8          
   9          
  10          void serial()interrupt 4
  11          {
  12   1              if(RI==1)
  13   1              {
  14   2                      if(SBUF=='1')
  15   2                      {
  16   3                              tf=1;                   
  17   3                      }
  18   2                      else if(SBUF=='2')
  19   2                      {
  20   3                              gf=1;
  21   3                      }
  22   2              }
  23   1      }
  24          void main()
  25          {
  26   1      
  27   1              buz = 1;
  28   1              lcd_init();
  29   1              serial_init();
  30   1              lcddatastr("   Coal Mine    ");
  31   1              lcdcmd(0xc0);
  32   1              lcddatastr("Monitering Sys   ");
  33   1      
  34   1              IE=0x90;
  35   1              P2=0x1f;
  36   1              while(1)
  37   1              {
  38   2              
  39   2                      while(P2==0x1f);
  40   2                      if(P2_0==0)
  41   2                      {
  42   3                      Transmit('0');
  43   3                      lcdcmd(0x01);
  44   3                      lcdcmd(0x80);
  45   3                      lcddatastr("Forward");
  46   3                              while(P2!=0x1f);        
  47   3                      
  48   3                      }
  49   2      
  50   2                      if(P2_1==0)
  51   2                      {
  52   3                      Transmit('1');
  53   3                      lcdcmd(0x01);
  54   3                      lcdcmd(0x80);
  55   3                      lcddatastr("Backward");
C51 COMPILER V8.06   MAIN                                                                  02/21/2011 20:22:01 PAGE 2   

  56   3                      while(P2!=0x1f);
  57   3                      }
  58   2      
  59   2                      if(P2_2==0)
  60   2                      {
  61   3                      Transmit('2');
  62   3                      lcdcmd(0x01);
  63   3                      lcdcmd(0x80);
  64   3                      lcddatastr("Left");
  65   3                      while(P2!=0x1f);
  66   3                      }
  67   2      
  68   2                      if(P2_3==0)
  69   2                      {
  70   3                      Transmit('3');
  71   3                      lcdcmd(0x01);
  72   3                      lcdcmd(0x80);
  73   3                      lcddatastr("Right");
  74   3                      while(P2!=0x1f);
  75   3                      }
  76   2      
  77   2                      if(P2_4==0)
  78   2                      {
  79   3                      Transmit('4');
  80   3                      lcdcmd(0x01);
  81   3                      lcdcmd(0x80);
  82   3                      lcddatastr("Stop");
  83   3                      while(P2!=0x1f);
  84   3                      }
  85   2                              
  86   2                      delay(50);
  87   2      
  88   2              
  89   2                      if(tf==1)
  90   2                      {
  91   3                      lcdcmd(0x01);
  92   3                      lcdcmd(0x80);
  93   3                      lcddatastr("Temp Abnormal");
  94   3                      buz=0;
  95   3                      tf=0;           
  96   3                      }
  97   2                      else if(gf==2)
  98   2                      {
  99   3                      lcdcmd(0x01);
 100   3                      lcdcmd(0x80);
 101   3                      lcddatastr("Gas Abnormal");             
 102   3                      buz=0;
 103   3                      gf=0;
 104   3                      }
 105   2                      else
 106   2                      {
 107   3                      lcdcmd(0x80);
 108   3                      lcddatastr("   Coal Mine    ");
 109   3                      lcdcmd(0xc0);
 110   3                      lcddatastr("Monitering Sys   ");
 111   3                      buz=1;
 112   3                      }
 113   2              }       
 114   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
C51 COMPILER V8.06   MAIN                                                                  02/21/2011 20:22:01 PAGE 3   

   CODE SIZE        =    456    ----
   CONSTANT SIZE    =     95    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
